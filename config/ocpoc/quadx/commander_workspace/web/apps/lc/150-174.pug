extends ../../common/layout

block header
  -var STARTING_POINT = 150
  -var POINTS_PER_DISPLAY = 25
  -var ENDING_POINT = STARTING_POINT + POINTS_PER_DISPLAY - 1
  i.fa-fw.fa.fa-signal
  | Limit Checker - WP Results #{STARTING_POINT}-#{ENDING_POINT}

block main
  style.
    table.table-results th:nth-of-type(1) {width:40px; overflow:hidden;} 
    table.table-results th:nth-of-type(2) {width:100px; overflow:hidden;} 
    table.table-results th:nth-of-type(3) {width:100px; overflow:hidden;} 
    table.table-results th:nth-of-type(4) {width:130px; overflow:hidden;} 
    table.table-results th:nth-of-type(5) {width:150px; overflow:hidden;} 
    table.table-results td:nth-of-type(1) {width:100px; overflow:hidden;}
    table.table-results td:nth-of-type(2) {width:100px; overflow:hidden;}
    table.table-results td:nth-of-type(3) {width:130px; overflow:hidden;}
    table.table-results td:nth-of-type(4) {width:150px; overflow:hidden;}
                       
  .row           
      article.col-xs-12.col-sm-12.col-md-6.col-lg-5
        #wid-LC-WPResults-0-24.jarviswidget.jarviswidget-color-blueDark(data-widget-editbutton='false')
          header
            span.widget-icon
              i.fa.fa-table
            h2 #{STARTING_POINT}-#{ENDING_POINT}
          div
            .jarviswidget-editbox
              input.form-control(type='text')
            .widget-body
              .table-responsive
                table.table.table-condensed.table-results
                  tbody
                    tr 
                      th #
                      th Watch
                      th Action State
                      th Action Result
                      th Commands   
                    - for (var iPoint = STARTING_POINT; iPoint < ENDING_POINT; ++iPoint) {   
                    tr
                      th #{iPoint}
                      td
                        span(data-sage={tlm:{name:'/CFS/LC/WPResults_#{iPoint}'}}) ---  
                      td
                        span(data-sage={tlm:{name:'/CFS/LC/APResults_#{iPoint}_CurrentState'}}) ---
                      td
                        span(data-sage={tlm:{name:'/CFS/LC/APResults_#{iPoint}_Result'}}) ---
                      td
                       .btn-group.dropup
                         button.btn.btn-primary.dropdown-toggle.btn-xs(type='button', data-toggle='dropdown')
                           | Commands
                           span.caret
                         ul#Commands.dropdown-menu(role='menu')
                           li
                             a(data-sage={cmd:{name:'/CFS/LC/SetAPState', Parameters:[{Name:'APNumber', Value:'#{iPoint}'}]}}) Set AP State
                           li
                             a(data-sage={cmd:{name:'/CFS/LC/SetAPPermOff', Parameters:[{Name:'APNumber', Value:'#{iPoint}'}]}}) Set AP Perm Off
                           li
                             a(data-sage={cmd:{name:'/CFS/LC/ResetAPStats', Parameters:[{Name:'APNumber', Value:'#{iPoint}'}]}}) Reset AP Stats 
                           li
                             a(data-sage={cmd:{name:'/CFS/LC/ResetWPStats', Parameters:[{Name:'APNumber', Value:'#{iPoint}'}]}}) Reset WP Stats 
                    - }
                              